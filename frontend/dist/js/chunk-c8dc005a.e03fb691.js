(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c8dc005a"],{"0e98":function(t,e,a){},"76fe":function(t,e,a){"use strict";a.d(e,"j",(function(){return r})),a.d(e,"k",(function(){return i})),a.d(e,"l",(function(){return n})),a.d(e,"m",(function(){return o})),a.d(e,"n",(function(){return l})),a.d(e,"i",(function(){return u})),a.d(e,"g",(function(){return c})),a.d(e,"c",(function(){return d})),a.d(e,"h",(function(){return h})),a.d(e,"a",(function(){return p})),a.d(e,"e",(function(){return f})),a.d(e,"d",(function(){return m})),a.d(e,"b",(function(){return g})),a.d(e,"f",(function(){return b}));var s=a("b775");function r(){return Object(s["a"])({url:"/openlist",headers:{isMask:!1},method:"get"})}function i(t,e){return Object(s["a"])({url:"/openlist",headers:{isMask:!1},method:"get",params:{openlistId:t,path:e}})}function n(t){return Object(s["a"])({url:"/openlist",headers:{isMask:!1},method:"post",data:{...t,action:"mkdir"}})}function o(t){return Object(s["a"])({url:"/openlist",headers:{isMask:!1},method:"post",data:t})}function l(t){return Object(s["a"])({url:"/openlist",headers:{isMask:!1},method:"put",data:t})}function u(t){return Object(s["a"])({url:"/openlist",headers:{isMask:!1},method:"delete",data:{id:t}})}function c(t){return Object(s["a"])({url:"/job",headers:{isMask:!1},method:"post",data:t})}function d(t){return Object(s["a"])({url:"/job",headers:{isMask:!1},method:"get",params:t})}function h(t){return Object(s["a"])({url:"/job",headers:{isMask:!1},method:"put",data:t})}function p(t){return Object(s["a"])({url:"/job",headers:{isMask:!1},method:"delete",data:t})}function f(t){return Object(s["a"])({url:"/job",headers:{isMask:!1},method:"get",params:{...t,current:1}})}function m(t){return Object(s["a"])({url:"/job",headers:{isMask:!1},method:"get",params:t})}function g(t){return Object(s["a"])({url:"/job",headers:{isMask:!1},method:"delete",data:{taskId:t}})}function b(t){return Object(s["a"])({url:"/job",headers:{isMask:!1},method:"get",params:t})}},"7fbd":function(t,e,a){"use strict";a("9fef")},"8c11":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"menuRefresh"},[t._v("   "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.needShow>1,expression:"needShow > 1"}],staticClass:"refreshLabel"},[t._v(t._s(t.refreshText))]),e("el-switch",{directives:[{name:"show",rawName:"v-show",value:t.needShow>1,expression:"needShow > 1"}],on:{change:t.refreshChange},model:{value:t.refreshStatus,callback:function(e){t.refreshStatus=e},expression:"refreshStatus"}}),e("i",{directives:[{name:"show",rawName:"v-show",value:t.needShow>0,expression:"needShow > 0"}],class:(t.loading?"el-icon-loading":"el-icon-refresh-right")+" icon-btn",on:{click:t.refreshData}})],1)},r=[],i={name:"MenuRefresh",props:{loading:{type:Boolean,default:!1},autoRefresh:{type:Boolean,default:!0},freshInterval:{type:Number,default:3119},needShow:{type:Number,default:2},refreshText:{type:String,default:"自动刷新"}},data(){return{refreshStatus:!0,timer:null}},created(){this.refreshStatus=this.autoRefresh,this.refreshStatus?this.startRefresh():this.$emit("getData")},beforeDestroy(){this.destroy()},methods:{refreshChange(t){this.refreshStatus=t,t?this.startRefresh():this.destroy()},refreshData(){this.loading||this.$emit("getData")},startRefresh(){this.destroy(),this.$emit("getData"),this.timer=setInterval(()=>{this.$emit("getData")},this.freshInterval)},destroy(){this.timer&&clearInterval(this.timer)}}},n=i,o=(a("7fbd"),a("2877")),l=Object(o["a"])(n,s,r,!1,null,"554c6eda",null);e["a"]=l.exports},"99a6":function(t,e,a){"use strict";a("0e98")},"9fef":function(t,e,a){},b695:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"taskDetailTable"},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"table-data",attrs:{data:t.taskItemData.taskItemList,height:"calc(100% - 36px)","empty-text":"无数据"}},[e("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"form-box"},[1!=a.row.type?e("div",{staticClass:"form-box-item"},[e("div",{staticClass:"form-box-item-label"},[t._v(" 来源目录 ")]),e("div",{staticClass:"form-box-item-value"},[t._v(" "+t._s(a.row.srcPath)+" ")])]):t._e(),e("div",{staticClass:"form-box-item"},[e("div",{staticClass:"form-box-item-label"},[t._v(" 目标目录 ")]),e("div",{staticClass:"form-box-item-value"},[t._v(" "+t._s(a.row.dstPath)+" ")])]),e("div",{staticClass:"form-box-item"},[e("div",{staticClass:"form-box-item-label"},[t._v(" 创建时间 ")]),e("div",{staticClass:"form-box-item-value"},[t._v(" "+t._s(t._f("timeStampFilter")(a.row.createTime))+" ")])])])]}}])}),e("el-table-column",{attrs:{prop:"fileName",label:"文件名/目录"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.fileName||e.row.dstPath)+" ")]}}])}),e("el-table-column",{attrs:{prop:"fileSize",label:"文件大小",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("sizeFilter")(e.row.fileSize))+" ")]}}])}),e("el-table-column",{attrs:{prop:"type",label:"操作类型",width:"90"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{class:"bg-status bg-"+(a.row.type?"3":"8"),staticStyle:{width:"50px"}},[t._v(" "+t._s(0==a.row.type?a.row.isPath?"创建":"复制":1==a.row.type?"删除":"移动")+" ")])]}}])}),e("el-table-column",{attrs:{prop:"status",label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[1!=a.row.status?e("div",{class:"bg-status bg-"+a.row.status},[7!=a.row.status?e("span",[t._v(" "+t._s(t._f("taskItemStatusFilter")(a.row.status))+" ")]):e("el-popover",{attrs:{placement:"top-end",title:"错误原因",width:"200",trigger:"hover",content:a.row.errMsg}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[t._v("失败，"),e("span",{staticStyle:{color:"#409eff"}},[t._v("原因")])])])],1):e("el-progress",{staticStyle:{width:"90px"},attrs:{"stroke-width":20,"text-inside":!0,color:"rgba(64, 158, 255, .8)","text-color":"#fff","define-back-color":"rgba(64, 158, 255, .3)",percentage:Number(Number(a.row.progress).toFixed(3))}})]}}])})],1),e("div",{staticClass:"page"},[e("el-pagination",{attrs:{"current-page":t.params.pageNum,"page-size":t.params.pageSize,total:t.taskItemData.count,layout:"total, sizes, prev, pager, next, jumper","page-sizes":[10,20,50,100]},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)},r=[],i={name:"TaskDetailTable",props:{taskItemData:{type:Object,default:{taskItemList:[],count:0}},loading:{type:Boolean,default:!1}},data(){return{params:{pageSize:10,pageNum:1}}},created(){},beforeDestroy(){},methods:{handleSizeChange(t){this.params.pageSize=t,this.$emit("pageChange",this.params)},handleCurrentChange(t){this.params.pageNum=t,this.$emit("pageChange",this.params)}}},n=i,o=(a("99a6"),a("2877")),l=Object(o["a"])(n,s,r,!1,null,"608f2696",null);e["a"]=l.exports},c69d:function(t,e,a){"use strict";a("f9a4")},f9a4:function(t,e,a){},fada:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"taskDetail"},[e("div",{staticClass:"top-box"},[e("div",{staticStyle:{display:"flex","align-items":"center"}},[e("el-button",{staticStyle:{"margin-right":"12px"},attrs:{type:"primary",icon:"el-icon-back",size:"small"},on:{click:t.goback}},[t._v("返回")]),e("el-select",{staticStyle:{"margin-right":"12px",width:"160px"},attrs:{placeholder:"筛选状态",clearable:""},on:{change:t.getTaskItemList},model:{value:t.params.status,callback:function(e){t.$set(t.params,"status",e)},expression:"params.status"}},t._l(t.taskItemStatusList,(function(t,a){return e("el-option",{attrs:{label:t,value:a}})})),1),e("el-select",{staticStyle:{width:"140px"},attrs:{placeholder:"筛选操作类型",clearable:""},on:{change:t.getTaskItemList},model:{value:t.params.type,callback:function(e){t.$set(t.params,"type",e)},expression:"params.type"}},[e("el-option",{attrs:{label:"复制/创建",value:0}}),e("el-option",{attrs:{label:"删除",value:1}}),e("el-option",{attrs:{label:"移动",value:2}})],1)],1),e("div",{staticClass:"top-box-title"},[t._v("任务详情")]),e("menuRefresh",{attrs:{freshInterval:9973,autoRefresh:!1,loading:t.loading,needShow:1},on:{getData:t.getTaskItemList}})],1),e("taskDetailTable",{staticClass:"table-page-box",attrs:{loading:t.loading,taskItemData:t.taskItemData},on:{pageChange:t.pageChange}})],1)},r=[],i=(a("e9f5"),a("7d54"),a("76fe")),n=a("b4ec"),o=a("8c11"),l=a("b695"),u={name:"TaskDetail",components:{menuRefresh:o["a"],taskDetailTable:l["a"]},data(){return{taskItemData:{taskItemList:[],count:0},params:{taskId:null,pageSize:10,pageNum:1,status:null},loading:!1,btnLoading:!1,taskId:null,taskItemStatusList:[]}},created(){this.$route.query.hasOwnProperty("taskId")&&(this.params.taskId=this.$route.query.taskId),this.taskItemStatusList=n["a"]},beforeDestroy(){},methods:{getTaskItemList(){null!=this.params.taskId&&(this.loading=!0,Object(i["f"])(this.params).then(t=>{this.loading=!1,t.data.taskItemList.forEach(t=>{t.progress=parseInt(t.progress),t.progress=t.progress<100?t.progress:100}),this.taskItemData={taskItemList:t.data.taskItemList,count:t.data.count}}).catch(t=>{this.loading=!1}))},goback(){this.$router.go(-1)},pageChange(t){this.params.pageSize=t.pageSize,this.params.pageNum=t.pageNum,this.getTaskItemList()}}},c=u,d=(a("c69d"),a("2877")),h=Object(d["a"])(c,s,r,!1,null,"c485920c",null);e["default"]=h.exports}}]);