(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-236d22d0"],{"509e":function(t,e,i){"use strict";i("a633")},"76fe":function(t,e,i){"use strict";i.d(e,"j",(function(){return s})),i.d(e,"k",(function(){return n})),i.d(e,"l",(function(){return r})),i.d(e,"m",(function(){return o})),i.d(e,"n",(function(){return d})),i.d(e,"i",(function(){return l})),i.d(e,"g",(function(){return u})),i.d(e,"c",(function(){return c})),i.d(e,"h",(function(){return h})),i.d(e,"a",(function(){return m})),i.d(e,"e",(function(){return p})),i.d(e,"d",(function(){return g})),i.d(e,"b",(function(){return f})),i.d(e,"f",(function(){return b}));var a=i("b775");function s(){return Object(a["a"])({url:"/alist",headers:{isMask:!1},method:"get"})}function n(t,e){return Object(a["a"])({url:"/alist",headers:{isMask:!1},method:"get",params:{openlistId:t,path:e}})}function r(t){return Object(a["a"])({url:"/alist",headers:{isMask:!1},method:"post",data:{...t,action:"mkdir"}})}function o(t){return Object(a["a"])({url:"/alist",headers:{isMask:!1},method:"post",data:t})}function d(t){return Object(a["a"])({url:"/alist",headers:{isMask:!1},method:"put",data:t})}function l(t){return Object(a["a"])({url:"/alist",headers:{isMask:!1},method:"delete",data:{id:t}})}function u(t){return Object(a["a"])({url:"/job",headers:{isMask:!1},method:"post",data:t})}function c(t){return Object(a["a"])({url:"/job",headers:{isMask:!1},method:"get",params:t})}function h(t){return Object(a["a"])({url:"/job",headers:{isMask:!1},method:"put",data:t})}function m(t){return Object(a["a"])({url:"/job",headers:{isMask:!1},method:"delete",data:t})}function p(t){return Object(a["a"])({url:"/job",headers:{isMask:!1},method:"get",params:{...t,current:1}})}function g(t){return Object(a["a"])({url:"/job",headers:{isMask:!1},method:"get",params:t})}function f(t){return Object(a["a"])({url:"/job",headers:{isMask:!1},method:"delete",data:{taskId:t}})}function b(t){return Object(a["a"])({url:"/job",headers:{isMask:!1},method:"get",params:t})}},"871d":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"engine"},[t.getLoading?e("div",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}],staticClass:"loading-box content-none-data"},[t._v("加载中")]):e("div",{staticClass:"card-box"},[t._l(t.openlistList,(function(i){return e("div",{staticClass:"card-item"},[e("div",{staticClass:"card-item-top"},[e("el-image",{staticStyle:{width:"60px",height:"60px"},attrs:{src:"/logo/logo.svg",fit:"contain"}}),e("div",{staticStyle:{"margin-left":"12px"}},[e("div",{staticClass:"card-item-user"},[t._v(t._s(i.userName)+" "),null!=i.remark?e("div",{staticClass:"card-item-remark"},[t._v("["+t._s(i.remark)+"]")]):t._e()]),e("div",{staticClass:"card-item-url"},[t._v(t._s(i.url))])])],1),e("div",{staticClass:"card-item-bottom"},[e("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.editShowDialog(i)}}},[t._v("编辑")]),e("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.delOpenlist(i.id)}}},[t._v("删除")])],1)])})),t.getLoading?t._e():e("div",{staticClass:"card-item card-add",on:{click:t.addShow}},[0==t.openlistList.length?[t._v(" 暂无引擎，请"),e("span",{staticStyle:{color:"#409eff"}},[t._v("新增")])]:e("span",[t._v("新增")])],2),e("el-dialog",{attrs:{"close-on-click-modal":!1,visible:t.editShow,title:t.editFlag?"编辑":"新增",width:"600px","before-close":t.closeShow,"append-to-body":!0},on:{"update:visible":function(e){t.editShow=e}}},[e("div",{staticClass:"elform-box"},[t.editShow?e("el-form",{ref:"addRule",attrs:{model:t.editData,rules:t.editFlag?t.editRule:t.addRule,"label-width":"66px"}},[e("el-form-item",{attrs:{prop:"url",label:"地址"}},[e("el-input",{attrs:{placeholder:"请输入地址，如http://127.0.0.1:5244"},model:{value:t.editData.url,callback:function(e){t.$set(t.editData,"url",e)},expression:"editData.url"}})],1),e("el-form-item",{attrs:{prop:"remark",label:"备注"}},[e("el-input",{attrs:{placeholder:"备注方便你标识引擎，非必填"},model:{value:t.editData.remark,callback:function(e){t.$set(t.editData,"remark",e)},expression:"editData.remark"}})],1),e("el-form-item",{attrs:{prop:"token",label:"令牌"}},[e("el-input",{attrs:{"show-password":"",placeholder:"请输入令牌，"+(t.editFlag?"留空表示不修改":"请到OpenList管理-设置-其他中复制，保存后不要重置令牌")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submit.apply(null,arguments)}},model:{value:t.editData.token,callback:function(e){t.$set(t.editData,"token",e)},expression:"editData.token"}})],1)],1):t._e()],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.closeShow}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary",loading:t.editLoading},on:{click:t.submit}},[t._v("确 定")])],1)])],2)])},s=[],n=i("76fe"),r={name:"Engine",components:{},data(){return{openlistList:[],getLoading:!1,deleteLoading:!1,editLoading:!1,editData:null,editFlag:!1,editShow:!1,editRule:{url:[{required:!0,message:"请输入地址",trgger:"blur"}]},addRule:{url:[{required:!0,message:"请输入地址",trgger:"blur"}],token:[{required:!0,message:"请输入令牌，请到OpenList管理-设置-其他中复制，保存后不要重置令牌否则令牌失效",trgger:"blur"}]}}},created(){this.getOpenlistList()},beforeDestroy(){},methods:{getOpenlistList(){this.getLoading=!0,Object(n["j"])().then(t=>{this.getLoading=!1,this.openlistList=t.data}).catch(t=>{this.getLoading=!1})},addShow(){this.editFlag=!1,this.editData={remark:"",url:"",token:""},this.editShow=!0},editShowDialog(t){this.editData={...t,token:""},this.editFlag=!0,this.editShow=!0},closeShow(){this.editShow=!1},submit(){this.$refs.addRule.validate(t=>{t&&(this.editData.url=this.ensureHttpPrefix(this.editData.url),this.editLoading=!0,this.editFlag?Object(n["n"])(this.editData).then(t=>{this.editLoading=!1,this.$message({message:t.msg,type:"success"}),this.closeShow(),this.getOpenlistList()}).catch(t=>{this.editLoading=!1}):Object(n["m"])(this.editData).then(t=>{this.editLoading=!1,this.$message({message:t.msg,type:"success"}),this.closeShow(),this.getOpenlistList()}).catch(t=>{this.editLoading=!1}))})},delOpenlist(t){this.$confirm("操作不可逆，将永久删除该引擎，请确认没有作业使用该引擎，否则会导致错误，仍要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.deleteLoading=!0,Object(n["i"])(t).then(t=>{this.deleteLoading=!1,this.$message({message:t.msg,type:"success"}),this.getOpenlistList()}).catch(t=>{this.deleteLoading=!1})})},ensureHttpPrefix(t){return/^https?:\/\//i.test(t)?t:t.startsWith("//")?"http:"+t:"http://"+t}}},o=r,d=(i("509e"),i("2877")),l=Object(d["a"])(o,a,s,!1,null,"b329e14a",null);e["default"]=l.exports},a633:function(t,e,i){}}]);